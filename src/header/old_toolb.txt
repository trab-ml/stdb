import React, { useState } from 'react';
import { NavLink } from 'react-router-dom';
import { AccountBalance, Home } from '@mui/icons-material';
import DrawerComp from './DrawerComponent';
import {
  Button,
  Tab,
  Tabs,
  ThemeProvider,
  Toolbar,
  Typography,
  createTheme,
  useMediaQuery,
  useTheme,
} from "@mui/material";

const appLinktheme = createTheme({
  palette: { 
    primary: {
      main: '#18A0FB'
    }
  },
  typography: {
    button: {
      textTransform: 'capitalize'
    }
  }
});

const PAGES: string[] = ["features", "pricing", "community", "support"];

export interface ToolbarComponentProps {
  setSelectedNavIsHome: (value: boolean) => void;
}

const ToolbarComponent: React.FC<ToolbarComponentProps> = ({ setSelectedNavIsHome }) => {
  const [state, setState] = useState<{ appNavState: number }>({ appNavState: 0 });
  const theme = useTheme();
  const isMobileView = useMediaQuery(theme.breakpoints.down('md'));

  return (
    <Toolbar className='toolbar'>
      {isMobileView ? (
        <>
          <NavLink to='/' onClick={() => setSelectedNavIsHome(true)}>
            <Typography id='logo'><Home /></Typography>
          </NavLink>
          <DrawerComp setSelectedNavIsHome={setSelectedNavIsHome} />
        </>
      ) : (
        <>
          <Typography >STDB LOGO</Typography>
          <ThemeProvider theme={appLinktheme}>
            <nav>
              <Tabs
                value={state.appNavState}
                onChange={(e, value) => {
                  value === 0 && setSelectedNavIsHome(true);
                  value !== 0 && setSelectedNavIsHome(false);
                  setState({ appNavState: value });
                }}
              >
                <Tab
                  label={<AccountBalance />}
                  component={NavLink}
                  to={'/'}
                  className='tab'
                />
                {PAGES.map((page: string, index: number) => (
                  <Tab
                    key={index}
                    label={page}
                    component={NavLink}
                    to={`/${page}`}
                    className='tab'
                  />
                ))}
              </Tabs>
            </nav>
          </ThemeProvider>
                  
          <NavLink to='/login' onClick={() => setSelectedNavIsHome(false)}>
            <Button id='btn' className='button' variant="outlined" sx={{marginLeft: 'auto'}}>
              Log In
            </Button>
          </NavLink>

          <NavLink to='/register' onClick={() => setSelectedNavIsHome(false)}>
            <Button className='button' variant="contained" sx={{marginLeft: '10px', background: '#18A0FB'}}>
              Register
            </Button>
          </NavLink>
        </>
        )
      }
    </Toolbar>
  )
}

export default ToolbarComponent;